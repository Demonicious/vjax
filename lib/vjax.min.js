class vjax { constructor(e) { this.xhr = null, this.xhr = new XMLHttpRequest, e.onProgress && (this.xhr.onprogress = (() => { e.onProgress() })), e.onResponse && (this.xhr.onload = (() => { let s = { url: this.xhr.responseURL, status: this.xhr.status, headers: this.xhr.getAllResponseHeaders(), text: this.xhr.responseText }; this.xhr.getResponseHeader("content-type").includes("application/json") && (s.json = JSON.parse(s.text)), e.onResponse(s) })), e.onError && (this.xhr.onerror = (s => { e.onError(s) })), e.preProcess && e.preProcess(); let s = null; if (e.data) if ("POST" == e.method) { let r; for (r in s = new FormData, e.data) s.append(r, e.data[r]) } else { let r; for (r in s = "", e.data) s += `${r}=${e.data[r]}`; let t = e.url.slice(-1); "/" != t && "\\" != t || (e.url = e.url.substring(0, e.url.length - 1)), e.url += `?${s}` } return this.xhr.open(e.method, e.url, !0), this.xhr.send(s), e.onSend && e.onSend(), this } }